<!DOCTYPE html>
<html>
  <head>
    <title>Menu Example</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap.no-responsive.no-icons.min.css" rel="stylesheet">
    <style>
      body {
        padding: 20px;
        padding-bottom: 500px;
      }
      .nav li {
        margin-right: 20px;
      }
      .item {
        height: 300px;
        background: #eee;
        margin-bottom: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="span3">
        <ul class="nav nav-list nav-stacked nav-pills affix span3">
          <li><a href="#item1">Item 1</a></li>
          <li><a href="#item2">Item 2</a></li>
          <li><a href="#item3">Item 3</a></li>
          <li><a href="#item4">Item 4</a></li>
          <li><a href="#item5">Item 5</a></li>
          <li><a href="#item6">Item 6</a></li>
          <li><a href="#item7">Item 7</a></li>
          <li><a href="#item8">Item 8</a></li>
          <li><a href="#item9">Item 9</a></li>
          <li><a href="#item10">Item 10</a></li>
        </ul>
      </div>
      <div class="span9">
        <div class="content">
          <h2>Scroll this page!</h2>
          <div class="item row"><a name="item1"></a>Item 1</div>
          <div class="item row"><a name="item2"></a>Item 2</div>
          <div class="item row"><a name="item3"></a>Item 3</div>
          <div class="item row"><a name="item4"></a>Item 4</div>
          <div class="item row"><a name="item5"></a>Item 5</div>
          <div class="item row"><a name="item6"></a>Item 6</div>
          <div class="item row"><a name="item7"></a>Item 7</div>
          <div class="item row"><a name="item8"></a>Item 8</div>
          <div class="item row"><a name="item9"></a>Item 9</div>
          <div class="item row"><a name="item10"></a>Item 10</div>
        </div>
      </div>
    </div>
    <script src="/build/build.js"></script>
    <script>
      var ScrollPosition = require('scroll-position')
      var classes = require('component-classes')

      var items = document.querySelectorAll('.item a')
      itemPosition = ScrollPosition(items)
      itemPosition.on('scrollOut', selectOne)
      selectOne(items[0])
      function selectOne(el) {
        var name = el.getAttribute('name')
        if (!name) return
        selectNone()
        var navItem = document.querySelector('.nav a[href="#'+name+'"]')
        classes(navItem.parentNode).add('active')
      }

      function selectNone() {
        var navItems = document.querySelectorAll('.nav li')
        for (var i = 0; i < navItems.length; i++) {
          classes(navItems[i]).remove('active')
        }
      }
    </script>
  </body>
</html>
